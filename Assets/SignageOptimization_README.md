# サイネージ用途 Unity プロジェクト最適化設定

## 概要
このドキュメントは、サイネージ用途でのUnityプロジェクトのパフォーマンス最適化設定について説明します。

## 適用済みの最適化設定

### 1. PlayerSettings の最適化
- **Unity スプラッシュスクリーン**: 無効化（起動時間短縮）
- **アナリティクス送信**: 無効化（プライバシー保護・パフォーマンス向上）
- **プレイヤーログ**: 無効化（ディスクI/O削減）
- **フルスクリーン切り替え**: 無効化（サイネージ用途では不要）
- **他の音声ソースのミュート**: 有効化（音声競合防止）

### 2. QualitySettings の最適化
- **ピクセルライト数**: 2 → 1（GPU負荷軽減）
- **シャドウ**: 無効化（レンダリング負荷軽減）
- **シャドウ距離**: 40 → 20（メモリ使用量削減）
- **異方性フィルタリング**: 無効化（GPU負荷軽減）
- **ソフトベジテーション**: 無効化（CPU負荷軽減）

### 3. TimeManager の最適化
- **Fixed Timestep**: 0.02 → 0.033（30FPS対応）
- **Maximum Allowed Timestep**: 0.333 → 0.167（フレーム落ち時の安定性向上）
- **Maximum Particle Timestep**: 0.03 → 0.033（パーティクルシステム最適化）

## 新規追加コンポーネント

### SignagePerformanceOptimizer
自動的に以下の最適化を実行します：

#### パフォーマンス設定
- **ターゲットフレームレート**: 30FPS（サイネージ用途に適した設定）
- **VSync**: 無効化（入力遅延削減）
- **ガベージコレクション**: スマート制御（メモリ監視付き）

#### レンダリング最適化
- **シャドウ**: 完全無効化
- **レンダリングパス**: Forward（Deferredより軽量）
- **HDR**: 無効化（メモリ使用量削減）
- **MSAA**: 無効化（GPU負荷軽減）

#### ライト最適化
- **シャドウ**: 全ライトで無効化
- **ライト範囲**: 最大10mに制限
- **ライト強度**: 最大2.0に制限

#### シーンオブジェクト最適化
- **未使用AudioSource**: 自動無効化
- **パーティクルシステム**: 最大パーティクル数100に制限

## 使用方法

### 1. SignagePerformanceOptimizer の設定
1. 空のGameObjectを作成
2. `SignagePerformanceOptimizer` コンポーネントを追加
3. 必要に応じて設定を調整

### 2. 推奨設定値
```csharp
// 高パフォーマンス設定
Target Frame Rate: 30
Disable VSync: true
Disable Shadows: true
Optimize Lights: true
Enable Garbage Collection: true
Garbage Collection Interval: 600
Enable Memory Monitoring: true
Memory Threshold: 100

// メモリ重視設定
Target Frame Rate: 24
Enable Garbage Collection: true
Garbage Collection Interval: 300
Enable Memory Monitoring: true
Memory Threshold: 50
```

## 追加推奨事項

### 1. アセット最適化
- **テクスチャ**: 圧縮形式の使用（DXT1/BC1、DXT5/BC3）
- **モデル**: LOD（Level of Detail）の設定
- **音声**: 適切な圧縮形式の使用

### 2. スクリプト最適化
- **Update()**: 必要最小限の処理のみ
- **FindObjectOfType**: 起動時に一度だけ実行
- **GetComponent**: キャッシュして使用

### 3. シーン最適化
- **不要なオブジェクト**: 削除または非アクティブ化
- **ライト**: 必要最小限の配置
- **カメラ**: 単一カメラの使用

## パフォーマンス監視

### 1. フレームレート監視
- 5秒ごとにフレームレートをチェック
- ターゲットの80%未満で警告ログ出力

### 2. メモリ使用量監視
- リアルタイムメモリ使用量監視
- 閾値超過時の自動ガベージコレクション
- メモリリークの早期発見
- 解放されたメモリ量のログ出力

## 注意事項

1. **品質とパフォーマンスのバランス**: 必要に応じて設定を調整
2. **ハードウェア依存**: 実際の運用環境でテスト
3. **長期運用**: メモリリークの監視が重要
4. **アップデート**: Unityバージョンアップ時の設定確認

## トラブルシューティング

### フレームレートが低い場合
1. シャドウを完全に無効化
2. ライト数を削減
3. テクスチャサイズを縮小
4. パーティクル数を制限

### メモリ使用量が多い場合
1. ガベージコレクションを有効化
2. テクスチャ圧縮を確認
3. 不要なアセットを削除
4. LOD設定を確認 